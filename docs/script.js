(()=>{"use strict";const e=Symbol("events-collection"),t={on(e,t){this._getEvent(e).push(t)},off(e,t){const n=this._getEvent(e),s=n.indexOf(t);n.splice(s,1)},fire(e,...t){for(const n of this._getEvent(e))n({name:e},...t)},get _events(){return this[e]||Object.defineProperty(this,e,{value:()=>({})}),this[e]},_getEvent(e){return this._events[e]||(this._events[e]=[]),this._events[e]}};function n(e,...t){t.forEach((t=>{Object.getOwnPropertyNames(t).forEach((n=>{if(n in e.prototype)return;const s=Object.getOwnPropertyDescriptor(t,n);s.enumerable=!1,Object.defineProperty(e.prototype,n,s)}))}))}class s extends Set{constructor(e){super(e)}add(e){super.add(e),this.fire("add",e)}delete(e){super.delete(e),this.fire("delete",e)}}n(s,t);class a{constructor(e){this._value=e}get(){return this._value}set(e){if(this._value===e)return;const t=this.get();this._value=e,this.fire("change",{oldValue:t,newValue:e})}}n(a,t);class i{constructor(e,t={}){this._element=e,this._options=t,this._observable=new a(this._defaultValue)}get value(){return this._observable.get()}get _defaultValue(){return this._options.defaultValue||null}attach(){this._getInputValue()!==this.value&&this._synchronizeElementValue();const e=this._options.delay||250;this._element.addEventListener(this._getInputEvent(),function(e,t){let n;return function(...s){const a=this;n&&clearTimeout(n),n=setTimeout((()=>{n=null,e.apply(a,s)}),t)}}((()=>{this._observable.set(this._getInputValue())}),e)),this._observable.on("change",((e,t)=>{this._getInputValue()!==this.value&&this._synchronizeElementValue(),this.fire("change",t)})),this.fire("change")}}n(i,t);class l extends i{_getInputEvent(){return"input"}get _defaultValue(){return this._element.value||super._defaultValue}_synchronizeElementValue(){this._element.value=this.value}_getInputValue(){return"number"===this._element.type?Number(this._element.value):this._element.value}}const r=document.getElementById("canvas-preview"),u=document.getElementById("progress-bar"),o=document.getElementById("gallery"),c=r.getContext("2d"),h=new s,d=new l(document.getElementById("input-screen-width"),{defaultValue:screen.width}),g=new l(document.getElementById("input-screen-height"),{defaultValue:screen.height});d.on("change",(()=>{r.width=d.value})),g.on("change",(()=>{r.height=g.value})),d.attach(),g.attach();const m=new class extends i{_getInputEvent(){return"change"}get _defaultValue(){return this._element.checked||super._defaultValue}_synchronizeElementValue(){this._element.checked=this.value}_getInputValue(){return this._element.checked}}(document.getElementById("resize-copy-clipboard"),{defaultValue:!0});m.attach(),h.on("add",((e,t)=>{const n=document.createElement("div");n.classList.add("gallery-item"),n.style.backgroundImage=`url(${t.src})`,o.appendChild(n)}));let p=75;[...document.querySelectorAll(".js-resize-button")].forEach((e=>{e.addEventListener("click",(()=>{var t;t=e.getAttribute("data-option"),p=Number(t.replace("px","")),u.innerText=p+"%",u.style.width=u.innerText}))})),window.addEventListener("paste",(e=>{const t=[...e.clipboardData.items].filter((e=>"file"===e.kind)).shift();if(!t)return;const n=t.getAsFile();if(!(s=n)||"image/png"!==s.type&&"image/jpeg"!==s.type)return;var s;const a=new FileReader,i=new Image;a.addEventListener("load",(()=>{i.src=a.result})),i.addEventListener("load",(async()=>{const e=p/100,t=document.createElement("canvas"),n=t.getContext("2d");t.width=i.width*e,t.height=i.height*e,n.scale(p/100,p/100),n.drawImage(i,0,0),c.clearRect(0,0,r.width,r.height),c.drawImage(i,0,0),m.value&&console.log("Auto-copy enabled.");const s=new ClipboardItem({"image/png":new Promise((e=>t.toBlob(e)))});await navigator.clipboard.write([s]),c.resetTransform(),h.add(i)})),a.readAsDataURL(n)}))})();
//# sourceMappingURL=script.js.map